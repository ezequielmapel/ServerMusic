<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link rel='stylesheet' href='/stylesheets/style.css' />
    <link rel="stylesheet" href="/bootstrap-4.0.0/dist/css/bootstrap.min.css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.1.0/css/font-awesome.min.css" />
    <!--<script src="/javascripts/scripts.js"></script>-->
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script type="text/javascript" src="https://cdnjs.cloudflare.com/ajax/libs/d3/3.4.11/d3.min.js"></script>


  </head>


  <body>
  <style>
    .buttonPlayer .myBtn:hover{
        background-color: black;
        color: white;
    }
  </style>
    <div class="container-fluid">
      <div class="header">
         <h1><%= title %></h1>
      </div>
  </div>

      <div class="container">

      <div class="musics">
            <h2 class='headerPlayer'>Play</h2>



            <h2 class="headerMusics">Musicas</h2>
            <!--
            <% for (var i=0;i<items.length;i++){ %>
                <a class="btn btn-primary" name="<%= nItems[i] %>" href="<%= nItems[i] %>"><%= items[i]%></a><br><br>
                <%};%>
            -->
            <div class="scroll">
                <div class="scroll-bar">
                  <% for (var i=0;i<items.length;i++){ %>
                      <div class="card">
                       <div class="card-body">

                            <div class="button-play">
                                <button type="button" id="button_fbw" class="btn myBtn" onclick='buttonRewindPress()'>
                                  <i class="fa fa-fast-backward"></i>
                                </button>

                                <button type="button" id="button_bw" class="btn myBtn" onclick='buttonBackPress()'>
                                  <i class="fa fa-backward"></i>
                                </button>

                                <button type="button" id="button_play" class="btn myBtn" onclick='buttonPlayPress()'>
                                  <i class="fa fa-play"></i>
                                </button>

                                <button type="button" id="button_stop" class="btn myBtn" onclick='buttonStopPress()'>
                                  <i class="fa fa-stop"></i>
                                </button>

                                <button type="button" id="button_fw" class="btn myBtn" onclick='buttonForwardPress()'>
                                  <i class="fa fa-forward"></i>
                                </button>

                                <button type="button" id="button_ffw" class="btn myBtn" onclick='buttonFastforwardPress()'>
                                  <i class="fa fa-fast-forward"></i>
                                </button>
                        </div>
                      <a class="btn btn-primary" name="<%= nItems[i] %>" href="musics/<%= nItems[i]%>"><%= items[i]%></a><br><br>


                      </div>
                  </div>
                     <%};%>
                </div>
        </div>

    <script type="text/javascript">



    // LISTA?
    var algo = function get(music){
        if(music=(new RegExp('[?&]'+encodeURIComponent(music)+'=([^&]*)')).exec(location.search))
        return decodeURIComponent(music[1]);
    }
    console.log(algo)
     var state = 'stop';

    function buttonBackPress() {
    console.log("button back invoked.");
    }

    function buttonForwardPress() {
    console.log("button forward invoked.");
    }

    function buttonRewindPress() {
    console.log("button rewind invoked.");
    }

    function buttonFastforwardPress() {
    console.log("button fast forward invoked.");
    }

    function buttonPlayPress() {

    if(state=='stop'){

      state='play';
      var button = d3.select("#button_play").classed('btn-success', true);
      button.select("i").attr('class', "fa fa-pause");
      window.location.href=window.location.href+items;
    }
    else if(state=='play' || state=='resume'){
      state = 'pause';
      d3.select("#button_play i").attr('class', "fa fa-play");
    }
    else if(state=='pause'){
      state = 'resume';
      d3.select("#button_play i").attr('class', "fa fa-pause");
    }
    console.log("button play pressed, play was "+state);
    }

    function buttonStopPress(){
    state = 'stop';
    var button = d3.select("#button_play").classed('btn-success', false);
    button.select("i").attr('class', "fa fa-play");
    console.log("button stop invoked.");
    }


    </script>
  </body>
</html>
